
> wanderlog-api@1.0.0 dev
> env-cmd -f .env.local tsx src/index.ts

âœ… DATABASE_URL is configured
[AIService] Initializing providers...
[AIService] Provider order: kouri
[AzureOpenAI] Configuration incomplete - missing endpoint or API key
[Gemini] Provider initialized successfully
[Gemini] Model: gemini-2.0-flash
[AIService] Gemini provider registered
[Kouri] Provider initialized successfully
[Kouri] Base URL: https://api.kourichat.com/v1
[Kouri] Chat model: gpt-4o-mini
[Kouri] Vision model: gpt-4o-mini
[AIService] Kouri provider registered
[AIService] Available providers: gemini, kouri
ğŸ“¦ Loading CollectionRecommendationController...
âœ… CollectionRecommendationController loaded successfully
ğŸ“¦ Loading collection recommendation routes...
âœ… Collection recommendation routes loaded successfully
[AIRecommendationService] Initializing providers...
[AIRecommendationService] Provider order: kouri
[Kouri] Provider initialized successfully
[Kouri] Base URL: https://api.kourichat.com/v1
[Kouri] Chat model: gpt-4o-mini
[Kouri] Vision model: gpt-4o-mini
[AIRecommendationService] Kouri provider registered
[AzureOpenAI] Configuration incomplete - missing endpoint or API key
[Gemini] Provider initialized successfully
[Gemini] Model: gemini-2.0-flash
[AIRecommendationService] Gemini provider registered
[AIRecommendationService] Available providers: kouri, gemini
[Kouri] Provider initialized successfully
[Kouri] Base URL: https://api.kourichat.com/v1
[Kouri] Chat model: gpt-4o-mini
[Kouri] Vision model: gpt-4o-mini
[Kouri] Provider initialized successfully
[Kouri] Base URL: https://api.kourichat.com/v1
[Kouri] Chat model: gpt-4o-mini
[Kouri] Vision model: gpt-4o-mini
=== BOOT: dist/index.js started ===
ğŸ”„ Starting application...
ğŸ“ NODE_ENV: undefined
ğŸ“ PORT: 3000
BOOT: index.ts running
PORT = 3000
ğŸ“ APIFY_API_TOKEN loaded: Yes (apify_api_gBQqN3ENAw...)
â„¹ï¸  No proxy configured
âœ… Core modules loaded
ğŸ“ Static files path: /Users/bahaa/Desktop/bahaa-dev-repo/wanderlog/wanderlog_api/public
ğŸ”„ Loading routes...
  âœ… authRoutes loaded
  âœ… spotRoutes loaded
  âœ… tripRoutes loaded
  âœ… destinationRoutes loaded
  âœ… collectionRoutes loaded
  âœ… publicPlaceRoutes loaded
  âœ… collectionRecommendationRoutes loaded
  âœ… searchV2Routes loaded
âœ… Collection recommendations routes registered
âœ… Search V2 routes registered
ğŸš€ Starting server on port 3000...
âœ… Server is running on 0.0.0.0:3000
ğŸ¥ Health check available at /health
[32minfo[39m: Server is running on port 3000 {"timestamp":"2026-01-03 19:57:07"}
âœ… Database connection established
â¡ï¸  GET /health
ğŸ¥ Health check requested
â¡ï¸  POST /api/places/ai/search-v2
[32minfo[39m: [SearchV2] Starting search for: "CafÃ© Hana" {"timestamp":"2026-01-03 19:58:08"}
[32minfo[39m: [IntentClassifier] Classifying query: "CafÃ© Hana" {"timestamp":"2026-01-03 19:58:08"}
[Kouri] Sending responses request to: https://api.kourichat.com/v1/responses
[Kouri] Responses request successful
[Kouri] Tokens used: 693
[32minfo[39m: [IntentClassifier] AI classified as: specific_place (confidence: 0.9) {"timestamp":"2026-01-03 19:58:11"}
[32minfo[39m: [SearchV2] Detected intent: specific_place (confidence: 0.9) {"timestamp":"2026-01-03 19:58:11"}
[32minfo[39m: [SearchV2] Handling specific_place intent for: "CafÃ© Hana" {"timestamp":"2026-01-03 19:58:11"}
[32minfo[39m: [IntentClassifier] Handling specific place query: "CafÃ© Hana" {"timestamp":"2026-01-03 19:58:11"}
[Kouri] Sending responses request to: https://api.kourichat.com/v1/responses
[32minfo[39m: [IntentClassifier] Searching database for: "CafÃ© Hana" {"timestamp":"2026-01-03 19:58:11"}
[32minfo[39m: [IntentClassifier] Found 20 candidates for "CafÃ© Hana" {"timestamp":"2026-01-03 19:58:11"}
[32minfo[39m: [IntentClassifier] No candidates met similarity threshold for "CafÃ© Hana" {"timestamp":"2026-01-03 19:58:11"}
[Kouri] Responses request successful
[Kouri] Tokens used: 398
[32minfo[39m: [IntentClassifier] Generated description: 283 chars, 50 words {"timestamp":"2026-01-03 19:58:12"}
[32minfo[39m: [IntentClassifier] Specific place result: description=283 chars, place=null {"timestamp":"2026-01-03 19:58:12"}
[32minfo[39m: [SearchV2] specific_place completed in 4681ms {"timestamp":"2026-01-03 19:58:13"}
â¡ï¸  GET /api/public-places?page=1&limit=20
â¡ï¸  GET /api/public-places?page=1&limit=20&search=cafe+hana
â¡ï¸  GET /api/public-places?page=1&limit=20&search=hana
â¡ï¸  GET /api/public-places?page=1&limit=20&search=Caf%C3%A9+Hana
â¡ï¸  GET /api/public-places?page=1&limit=20&search=Hana
â¡ï¸  GET /api/public-places?page=1&limit=20&search=design+museum
